<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard de Faturas</title>
  <link rel="icon" type="image/x-icon" href="./assets/favicon.png">
  <link rel="apple-touch-icon" href="./assets/favicon.png">
  <link rel="stylesheet" href="./css/style.css" />
</head>
<body>

  <!-- Sidebar Menu (hidden by default) -->
  <div id="sidebar">
    <div class="sidebar-menu" id="menuDashboard">
      <span class="sidebar-icon">üìä</span>
      <span class="sidebar-label">Dashboard</span>
    </div>
    <div class="sidebar-menu" id="menuEntities">
      <span class="sidebar-icon">üè¢</span>
      <span class="sidebar-label">Lista de Entidades</span>
    </div>
  </div>

  <!-- Main invoice dashboard -->
  <header>
    <h1 id="pageTitle">üìä Faturas-Recibo Emitidas</h1>
    <div id="year-toggle">
        <label for="yearSelect">Ano:</label>
        <select id="yearSelect"></select>
        <span id="refreshBtn" title="Atualizar Dados" tabindex="0" role="button"></span>
    </div>
  </header>

  <main>
    <section class="left">
      <table id="invoiceTable">
        <thead>
          <tr>
            <th>NIF</th>
            <th>ENTIDADE</th>
            <th>VALOR</th>
            <th>DATA EMISS√ÉO</th>
            <th>DATA SERVI√áO</th>
            <th>Trimestre</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <section class="right">
      <div class="panel" id="quarterPanel">
        <h3>Resumo Trimestral</h3>
        <div id="quarterSummary"></div>
        <p><strong>Total Anual:</strong> <span id="totalYearValue" class="total-value">0.00 ‚Ç¨</span></p>
      </div>

      <div class="panel" id="taxPanel">
        <h3>Estado Fiscal</h3>
        <div class="fiscal-item">
        <span class="fiscal-label">Pagamento IVA</span>
        <span class="fiscal-icon green">‚ùå</span>
        </div>
        <div class="fiscal-item">
        <span class="fiscal-label">Reten√ß√£o na Fonte</span>
        <span class="fiscal-icon red">‚ùå</span>
        </div>
        <div class="fiscal-item">
        <span class="fiscal-label">Pagamento IRS</span>
        <span class="fiscal-icon green">‚ùå</span>
        </div>
      </div>

      <div class="panel" id="nifStatsPanel">
        <h3>Faturas por NIF</h3>
        <ul id="nifStats"></ul>
        <p><strong>Total de Faturas:</strong> <span id="totalInvoices" class="total-value">0</span></p>
      </div>
    </section>
  </main>

  <!-- Entities Table Panel (hidden by default) -->
  <div id="entitiesPanel" style="display:none;">
    <table id="entitiesTable">
      <thead>
        <tr>
          <th id="sortNif" style="cursor:pointer;">NIF ‚ñ≤‚ñº</th>
          <th id="sortEntidade" style="cursor:pointer;">ENTIDADE ‚ñ≤‚ñº</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <!-- Loading Mask -->
  <div id="loadingOverlay" style="display:none;">
    <div class="loading-spinner"></div>
    <div class="loading-text">A carregar dados...</div>
  </div>

  <script src="config/secrets.js"></script>
  <script type="module" src="./js/main.js"></script>
</body>
</html>
